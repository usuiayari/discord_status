# Discord Status Updater

## 概要

Discordのカスタムアクティビティ（ステータス）を、ローカルのWebインターフェースから簡単に設定・管理できるツールです。

バックエンドはPython (Flask) で動作し、Web UI (HTML/JavaScript) からの更新リクエストを受け取ってDiscordに反映させます。

## 主な機能

* **Web UIによる簡単操作**: `index.html` からステータスの「Details (1行目)」と「State (2行目)」をリアルタイムで更新できます。

* **動的なアプリケーション切り替え**: 表示したいDiscordアプリケーション（"人生"、"勉強"など）をドロップダウンから簡単に切り替えられます。

* **柔軟な経過時間設定**: 経過時間を「誕生日から」「今から」「カスタム日時」の3モードから選択できます。

* **アプリケーション管理**: `settings.html` ページで、Discord Developer Portal で取得した Client ID を自由に追加・編集・削除できます。

* **誕生日設定**: `settings.html` で「誕生日から」モードの基準となる日付を設定できます。

* **設定の永続化**: アプリケーションリストや誕生日の設定は、ブラウザのLocalStorageに安全に保存されます。

* **自動セットアップ (Windows)**: `start.bat` が仮想環境の構築と必要なライブラリのインストールを自動で行います。

## 必要なもの

* Python 3.x

## 起動方法 (Windows)

* すべてのファイルを同じフォルダ内に入れてください
* 新規フォルダを作成し、その中へ入れていただくとトラブルが少なくなります

1. ファイル一式をダウンロードします。

2. `start.bat` ファイルをダブルクリックして実行します。

3. 初回起動時、自動的に `venv` フォルダ（仮想環境）が作成され、`requirements.txt` に記載されたライブラリ（Flask, Flask-Cors, pypresence）がインストールされます。

4. コンソールに `[INFO] Starting status.py...` と表示され、Webサーバーが `http://127.0.0.1:5000` で起動すれば準備完了です。


## 起動方法 (手動 / macOS / Linux)

1. ターミナルを開き、ファイルが配置されているディレクトリに移動します。

2. 仮想環境を作成します。
   python -m venv venv


3. 仮想環境をアクティベートします。

* *Windows (PowerShell/cmd)*: `.\venv\Scripts\activate`

* *macOS / Linux*: `source venv/bin/activate`

4. 必要なライブラリをインストールします。
 pip install -r requirements.txt


5. バックエンドスクリプトを実行します。
6. python status.py


6. サーバーが `http://127.0.0.1:5000` で起動すれば準備完了です。

## 使い方

1. **Discordクライアント**（デスクトップ版）を起動しておきます。

2. **バックエンド** (`status.py`) を上記の方法で起動します。

3. **（初回・設定変更時）** `settings.html` ファイルをブラウザで開きます。（`file:///.../settings.html` のように、ローカルファイルとして直接開いてください）
* **カスタムアプリの利用**: 初期状態のCLIENT IDでも利用はできますが、ご自身でアプリケーションを作っていただくと、カスタマイズ性が上がります。カスタムアプリを使う場合、「Application ID 管理」セクションで、ご自身のDiscordアプリケーションの **App Name**（例: マイアプリ）と **Client ID**（数値）を入力し、「Add Application」ボタンを押します。

* **誕生日（任意）**: 「基本設定」セクションで、ご自身の「誕生日」を設定し、「Save Birthday」ボタンを押します。

4. `index.html` ファイルをブラウザで開きます。（メインの操作画面はこちらです）

5. フォームに必要な情報を入力します。

* **Application**: `settings.html` で登録したアプリ（またはデフォルトのアプリ）を選択します。

* **開始時刻**: 表示したい経過時間モードを選択します。

* **Details / State**: 表示したいテキストを入力します。

6. 「Update Status」ボタンを押すと、Discord上のステータスが即座に更新されます。

## 注意事項

* このツールは、バックエンド (`status.py`) とDiscordクライアント（デスクトップ版）が両方とも実行されている必要があります。

* Web UI (`index.html`, `settings.html`) は、`http://127.0.0.1:5000` 経由ではなく、**ローカルファイルとして直接ブラウザで開いてください**。

* 設定はブラウザのLocalStorageに保存されます。ブラウザのキャッシュをクリアしたり、シークレットモードを使用したりすると設定がリセットされます。
